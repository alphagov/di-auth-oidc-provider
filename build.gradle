apply plugin: 'java'
apply plugin: 'application'
apply plugin: 'idea'

group 'uk.gov.di'

repositories {
    mavenCentral()
}

distributions {
    main {
        contents {
            from {
                [
                        'oidc-provider.yml'
                ]
            }

        }
    }
}

def dependencyVersions = [
        dropwizard:'2.0.21',
        nimbus_oauth2_sdk: '9.3.1',
        nimbus_jose_jwt: '9.8.1'
]

dependencies {
    implementation "com.nimbusds:oauth2-oidc-sdk:${dependencyVersions.nimbus_oauth2_sdk}",
            "com.nimbusds:nimbus-jose-jwt:${dependencyVersions.nimbus_jose_jwt}",
            "io.dropwizard:dropwizard-core:${dependencyVersions.dropwizard}",
            "io.dropwizard:dropwizard-client:${dependencyVersions.dropwizard}",
            "io.dropwizard:dropwizard-views-mustache:${dependencyVersions.dropwizard}",
            "io.dropwizard:dropwizard-assets:${dependencyVersions.dropwizard}"

    testImplementation 'org.junit.jupiter:junit-jupiter-api:5.6.0'
    testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine'
}

mainClassName = 'uk.gov.di.OidcProviderApplication'

run {
    args = ['server', 'oidc-provider.yml']
}